<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta charset="ISO-8859-1" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" ></link>
	<link rel="stylesheet" href="./index.css"></link>
	<title>Monitoria - IFPE</title>
</h:head>
<h:body>
	<nav class="navbar navbar-light bg-success">
	  <a class="navbar-brand" href="#">
	    <span class="glyphicon glyphicon-book" aria-hidden="true"></span>
	  </a>
	    <span class="navbar-text">Desenvolvimento de Software Corporativo (TESTE)</span>
	</nav>
	<div class="container">
		<div class="mpanel">
			<h:form>
				<div class="form-group">
			        <h:inputText id="nome" class="form-control" value="#{indexView.nomeUsuario}" required="true" label="nome" />
					<p:watermark for="nome" value="Digite seu nome" />
					
			        <h:inputText id="email" class="form-control" value="#{indexView.email}" required="true" label="email" />
					<p:watermark for="email" value="Digite seu email" />
					
			        <h:inputText id="password" class="form-control" value="#{indexView.senha}" required="true" label="password" />
					<p:watermark for="password" value="Digite sua senha" />
		
			       	<h:commandButton class="btn btn-success" value="Cadastrar" action="#{indexView.criarUsuario}">
			       		<f:ajax execute="@form" render="dataTableForm"/>
			       	</h:commandButton> 
				</div>
			</h:form>
		</div>
		
		<div class="mpanel">
			<h:form>
				<div class="form-group">
					<h:inputText id="emailBusca" binding="#{emailInput}" class="form-control" />
					<p:watermark for="emailBusca" value="Email para buscar" />
					
					<h:commandButton action="#{indexView.consultarUsuarioEmail(emailInput.value)}" value="Buscar" class="btn btn-primary">
						<f:ajax execute="@form" render="dataTableForm"/>
					</h:commandButton>
				</div>
			</h:form>
		</div>
	</div>
	<div class="container">
		<div class="mpanel">
			<h:form id="dataTableForm">
				<h:dataTable styleClass="table table-striped table-bordered" var="usuario" value="#{indexView.usuarios}" editable="true">
				    <h:column>
				    	<f:facet name="header">ID</f:facet>
				        <h:outputText value="#{usuario.id}" />
				    </h:column>
				 
				    <h:column>
				        <f:facet name="header">Nome</f:facet>
				        <h:outputText value="#{usuario.nome}" />
				    </h:column>
				 
				    <h:column>
				    	<f:facet name="header">E-mail</f:facet>
				        <h:outputText value="#{usuario.email}" />
				    </h:column>
				    
				    <h:column>
			    		<h:commandButton actionListener="#{indexView.deletarUsuario(usuario)}" value="Deletar"
			    						 class="btn btn-danger">
			    			<f:ajax execute="@form" render="dataTableForm"/>
			    		</h:commandButton>
			    		<p:link outcome="userDetail" value="Alterar">
			    			<f:param name="userId" value="#{usuario.id}" />
			    		</p:link>
				    </h:column>
				</h:dataTable>
			</h:form>
		</div>
	</div>
	
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</h:body>
</html>