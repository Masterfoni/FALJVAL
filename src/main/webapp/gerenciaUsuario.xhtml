<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta charset="ISO-8859-1" />
	<link rel="stylesheet" href="./resources/libs/bootstrap-3.3.7-dist/css/bootstrap.min.css"></link>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></link>
	<link rel="stylesheet" href="./homepage.css"></link>
	<link href="./resources/images/favicon.png" rel="shortcut icon" type="image/x-icon" />
	<title>Administração de Usuarios</title>
</h:head>
<h:body>
	<nav class="navbar navbar-inverse">
	  <div class="container-fluid">
	    <div class="navbar-header">
		    <a class="navbar-brand" id="menu-toggle"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
	    </div>
	    <ul class="nav navbar-nav">
	    </ul>
	    <ul class="nav navbar-nav navbar-right">
	      <li><a href="#"><span class="glyphicon glyphicon-log-out"></span> Sair</a></li>
	    </ul>
	  </div>
	</nav>
	
	<div id="wrapper">
		<!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <!-- <li class="sidebar-brand"><a href="#"></a></li> -->
                <li><a href="#"><span class="glyphicon glyphicon-user"></span>  Usuario</a></li>
                <li><a href="#"><span class="fa fa-users"></span>  Orientador</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-education"></span>  InscriÃ§Ã£o de Candidato</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-align-center"></span>  Plano de Monitoria</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-list-alt"></span>  Edital</a></li>
                <li><a href="#"><span class="fa fa-leanpub"></span>  Disciplina</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-book"></span>  Curso</a></li>
                <li><a href="#"><span class="fa fa-bookmark-o"></span>  CoordenaÃ§Ã£o</a></li>
                <li><a href="#"><span class="fa fa-bookmark"></span>  Departamento</a></li>
                <li><a href="#"><span class="glyphicon glyphicon-eye-open"></span>  Logs de AÃ§Ã£o</a></li>
            </ul>
        </div>
		
		<div id="page-content-wrapper">
			<div class="container-fluid"> 
				<div class="row">
					<div class="col-xs-8 col-xs-offset-2">
	                    <h:form>
							<div class="input-group">
			                	<h:inputText styleClass="form-control" placeholder="Digite o parametro..." value="#{gerenciaUsuarioView.nomeBusca}"></h:inputText>
		                    	<span class="input-group-btn">
		                    	    <h:commandButton value="Buscar" action="#{gerenciaUsuarioView.buscaUsuario()}" update="tabelaUsuarios"
		                    	    				 styleClass="btn btn-default">
		                    	    </h:commandButton>
		                    	</span>
				            </div>
						</h:form>
					</div>
				</div>
            	<div class="row">
                	<div class="col-lg-12">
                		<h:form>
	                        <h:dataTable id="tabelaUsuarios" value="#{gerenciaUsuarioView.usuarios}" var="usuario" class="table">
	                        	<h:column>
	                        		<f:facet name="header">Nome</f:facet>
	                        		#{usuario.nome}
	                        	</h:column>
	                        	<h:column>
	                        		<f:facet name="header">CPF</f:facet>
	                        		#{usuario.cpf}
	                        	</h:column>
	                        	<h:column>
	                        		<f:facet name="header">RG</f:facet>
	                        		#{usuario.rg} #{usuario.rgEmissor}
	                        	</h:column>
	                        	<h:column>
	                        		<f:facet name="header">E-mail</f:facet>
	                        		#{usuario.email}
	                        	</h:column>
	                        	<h:column>
	                        		<h:commandButton actionListener="#{gerenciaUsuarioView.deletaUsuario(usuario)}" value="Deletar"
	                        						 update="@form" class="btn btn-danger" />
	                        		<span>   </span>
	                        		<h:commandButton id="botaoUpdate" actionListener="#{gerenciaUsuarioView.alteraUsuario(usuario)}" 
	                        						 value="Alterar" class="btn btn-info">
	                        			<f:ajax execute="@form" render="atualizaUser" />
	                        		</h:commandButton>
	                        	</h:column>
	                        </h:dataTable>
	                	</h:form>
                    </div>
                </div>
                <h:panelGroup layout="block">
					<div class="alert alert-danger alert-dismissable fade in">
						<a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
						<h:messages/>
					</div>
				</h:panelGroup>
                
				<!-- MODAL DE ATUALIZA��O DE USU�RIO -->
				<div id="myModal" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
	    					<h:form class="dialogSignup">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">x</button>
										<h4 class="modal-title">Atualize o Usuario</h4>
								</div>
								<div class="modal-body">
									<div id="atualizaUser" style="display: none">
										<div class="form-group">
											<label for="nomeCadastro">Nome</label>
											<h:inputText id="nomeCadastro" class="form-control" 
														 value="#{gerenciaUsuarioView.usuarioAtualizado.nome}">
											</h:inputText>
										</div>
										<div class="form-group">
	            							<h:selectOneMenu value="#{gerenciaUsuarioView.usuarioAtualizado.sexo}">
	   											<f:selectItem itemValue="Masculino" itemLabel="Masculino" />
	   											<f:selectItem itemValue="Feminino" itemLabel="Feminino" />
									   			<f:selectItem itemValue="Outros" itemLabel="Outros" />
			 								</h:selectOneMenu>
										</div>
			    						<div class="form-group">
											<label for="cpfCadastro">CPF</label>
											<h:inputText id="cpfCadastro" class="form-control" 
														 value="#{gerenciaUsuarioView.usuarioAtualizado.cpf}"
					           							 aria-describedby="cpfDesc">
					           				</h:inputText>
											<small id="cpfDesc" class="form-text text-muted">Utilize apenas números</small>
										</div>
										<div class="form-group">
											<label for="emailCadastro">Email</label>
											<h:inputText id="emailCadastro" class="form-control" 
														 value="#{gerenciaUsuarioView.usuarioAtualizado.email}"
					     	   							 aria-describedby="emailDesc">
					     	   				</h:inputText>
											<small id="emailDesc" class="form-text text-muted">Utilize o formato EMAIL@DOMINIO</small>
										</div>
			 							<div class="form-group">
											<label for="senhaCadastro">Senha</label>
											<h:inputSecret id="senhaCadastro" class="form-control" 
														   value="#{gerenciaUsuarioView.usuarioAtualizado.senha}"
								 						   aria-describedby="senhaDesc">
								 			</h:inputSecret>
											<small id="senhaDesc" class="form-text text-muted">É recomendado utilizar uma senha com números e letras</small>
										</div>
				    				</div>
				    			</div>
				    			<div class="modal-footer">
									<h:commandButton value="Salvar Alterações" actionListener="#{gerenciaUsuarioView.persisteAlteracao()}" 
			   	 	   								 update="@form" class="btn btn-info" />
									<span>  </span>
				    				<button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
				    			</div>
							</h:form>
			    		</div>
					</div>
				</div>
            </div>
		</div>
	</div>

	
	<script src="./resources/libs/jquery-3.2.1/jquery-3.2.1.js"></script> 
	<script src="./resources/libs/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	
	<script>
	   $("#menu-toggle").click(function(e) {
	        e.preventDefault();
	        $("#wrapper").toggleClass("toggled");
	    });
	   
	   $("#btnTrigger").on("click", function(){
		   $($(this).attr("data-target")).modal("show");
		});
	   
	   $("#j_idt13\\:tabelaUsuarios\\:0\\:botaoUpdate").click(function(e) {
		   $("#atualizaUser").css({
	   		   visibility: "visible",
	   		   display: ""
	   	   });
		   console.log("jackson");
		   $("#myModal").modal();
	   });
	   
	   $("#cancelaUpdate").click(function(e) {
		   e.preventDefault();
		   $("#atualizaUser").css({
	   		   visibility: "hidden",
	   		   display: "none"
	   	   });	
	   });
	</script>
</h:body>
</html>