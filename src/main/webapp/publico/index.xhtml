<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<ui:include src="/comum/header-libs.xhtml"/>
		<link rel="stylesheet" href="../publico/index.css"></link>
		<title>Monitoria - IFPE</title>
	</h:head>
	
	<h:body class="my-login-page">
		<h:form>
			<p:remoteCommand name="login" actionListener="#{googleSignInView.loginGoogle}" />
		</h:form>

		<!-- BOTÃO ESCONDIDO QUE ATIVA O MODAL -->
		<button id="loginErrorButton" style="display: none" type="button" data-toggle="modal" data-target="#modalLoginError">Open Modal</button>

		<!-- MODAL DE ERRO ESPECÍFICO DE LOGIN -->
		<div id="modalDefaultErrors" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalLoginError" aria-hidden="true">
			<div class="modal-dialog">
			  <div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="modalLoginError">Atenção</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">x</span>
					</button>
				</div>
				<div class="modal-body">
				  <p>Utilize seu e-mail institucional.</p>
				</div>
				<div class="modal-footer">
				  <button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
				</div>
			  </div>
			</div>
		</div>

		<!-- MODAL DE ERROS GERAIS DE LOGIN -->
		<div id="modalFacesErrors" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="facesErrorTitle" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="facesErrorTitle">Atenção</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">x</span>
						</button>
					</div>
					<div class="modal-body">
						<h:messages/>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Fechar</button>
					</div>
				</div>
			</div>
		</div>

		<!-- MODAL DE CADASTRO NOVO-->
		<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="cadastroTitle" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<h:form class="dialogSignup">
						<div class="modal-header">
							<h5 class="modal-title" id="cadastroTitle">Cadastre-se</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">x</span>
							</button>
						</div>
						<div class="modal-body">
							<div id="cadastreSe">
								<div class="form-group row">
									<div class="col-sm-6">
										<label for="nomeCadastro">Nome</label>
										<h:inputText id="nomeCadastro" class="form-control" value="#{indexView.aluno.nome}"></h:inputText>
									</div>
									<div class="col-sm-6">
										<label for="sexoCadastro">Sexo</label>
										<h:selectOneMenu id="sexoCadastro" class="form-control" value="#{indexView.aluno.sexo}">
											<f:selectItem itemValue="Masculino" itemLabel="Masculino" />
											<f:selectItem itemValue="Feminino" itemLabel="Feminino" />
											<f:selectItem itemValue="Outros" itemLabel="Outros" />
										</h:selectOneMenu>
									</div>
								</div>

								<div class="form-group">
									<label for="matriculaCadastro">Matricula</label>
									<h:inputText id="matriculaCadastro" class="form-control" value="#{indexView.aluno.matricula}" 
												aria-describedby="matriculaDesc">
									</h:inputText>
									<small id="matriculaDesc" class="form-text text-muted">Utilize o formato 99999A9-AA9999</small>
								</div>

								<div class="form-group">
									<label for="cpfCadastro">CPF</label>
									<h:inputText id="cpfCadastro" class="form-control cpf" value="#{indexView.aluno.cpf}"
												aria-describedby="cpfDesc">
									</h:inputText>
									<small id="cpfDesc" class="form-text text-muted">Utilize apenas números</small>
								</div>

								<div class="form-group row">
									<div class="col-sm-6">
										<label for="rgCadastro">RG</label>
										<h:inputText id="rgCadastro" class="form-control" value="#{indexView.aluno.rg}"></h:inputText>
									</div>
									<div class="col-sm-6">
										<label for="emissorCadastro">Orgao expedidor</label>
										<h:inputText id="emissorCadastro" class="form-control expedidor" value="#{indexView.aluno.rgEmissor}"
													aria-describedby="emissorDesc">
										</h:inputText>
										<small id="emissorDesc" class="form-text text-muted">Formato seguindo o ex.: SDS/PE</small>
									</div>
								</div>

								<div class="form-group">
									<label for="emailCadastro">Email</label>
									<h:inputText id="emailCadastro" class="form-control" value="#{indexView.aluno.email}"
												aria-describedby="emailDesc">
									</h:inputText>
									<small id="emailDesc" class="form-text text-muted">Utilize o formato EMAIL@DOMINIO</small>
								</div>
								
								<div class="form-group">
									<label for="senhaCadastro">Senha</label>
									<h:inputSecret id="senhaCadastro" class="form-control" value="#{indexView.aluno.senha}"
												aria-describedby="senhaDesc">
									</h:inputSecret>
									<small id="senhaDesc" class="form-text text-muted">É recomendado utilizar uma senha com números e letras</small>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>
							<h:commandButton value="Cadastrar" actionListener="#{indexView.cadastrarAluno()}" 
												update="@form" class="btn btn-info" />
						</div>
					</h:form>
				</div>
			</div>
		</div>

		<section class="login-block">
			<div class="container">
				<div class="row">
					<div class="col-md-4 login-sec">
						<h2 class="text-center">GEM</h2>

						<h:form id="loginform" class="login-form">
							<div class="form-group">
								<label for="emailUsuario" class="text-uppercase">Email</label>
								<h:inputText id="emailUsuario" class="form-control" 
												value="#{indexView.usuario.email}" required="true" requiredMessage="E-mail é obrigatório">
								</h:inputText>
							</div>
							<div class="form-group">
								<label for="senhaUsuario" class="text-uppercase">Senha</label>
								<h:inputSecret id="senhaUsuario" class="form-control"
												value="#{indexView.usuario.senha}" required="true" requiredMessage="Senha é obrigatória">
								</h:inputSecret>
							</div>
							<div class="form-group">
								<h:commandButton id="loginaluno" value="Login" action="#{indexView.loginUsuario}" class="btn btn-block btn-success"/>
							</div>
							<div class="form-group">
								<h:commandButton value="Cadastre-se" class="btn btn-info btn-block cadastrador">
									<f:ajax execute="@none" render="cadastreSe" />
								</h:commandButton>
							</div>
							<div class="form-group">
								<div id="customBtn" class="customGPlusSignIn btn btn-default">
									<span class="icon"></span>
									<span class="buttonText">Login Servidor</span>
								</div>
							</div>
							<h:panelGroup layout="block" rendered="#{not empty facesContext.messageList}">
								<button type="button" class="btn btn-block btn-danger" data-toggle="modal" data-target="#modalFacesErrors">Existem erros no login</button>
							</h:panelGroup>
						</h:form>
						<div class="copy-text">Criado por João Vitor e Felipe Lima</div>
					</div>
					<div class="col-md-8 banner-sec">
					</div>
				</div>
			</div>
		</section>

		<script src="../resources/libs/jquery-3.3/jquery-3.3.1.min.js"></script>
		<script src="../resources/libs/jquery-mask/jquery.mask.min.js"></script>
		<script src="../resources/libs/bootstrap-4.0.0/dist/js/bootstrap.min.js"></script>
		<script src="https://apis.google.com/js/api:client.js"></script>
		<script src="../js/loginGoogle.js"></script>
		<script src="../publico/index.js"></script>
	</h:body>
</html>